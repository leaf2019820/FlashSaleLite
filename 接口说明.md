# FlashSaleLite 接口文档

## 接口设计说明

本项目采用传统的Web应用接口设计风格，而非RESTful风格。主要特点如下：

1. 接口设计特点：
   - 采用传统的URL路径设计，如 `/user/change-password`
   - 使用GET/POST方法处理请求，较少使用PUT/DELETE等HTTP方法
   - 返回统一的JSON格式响应
   - 支持会话（Session）管理
   - 使用表单提交数据

2. 与RESTful风格的区别：
   - 不严格遵循REST的资源概念
   - 不要求使用完整的HTTP方法集
   - 不要求无状态（Stateless）
   - 更注重功能的直观性和易用性

3. 接口命名规范：
   - 使用动词+名词的形式，如 `change-password`
   - 使用下划线或连字符分隔单词
   - 保持URL的语义清晰

## 一、用户认证接口

### 1. 用户注册
- **路径：** `/register`
- **方法：** GET, POST
- **功能：** 用户注册新账号
- **参数：**
  - username: 用户名
  - password: 密码
  - email: 邮箱（可选）
  - phone: 手机号（可选）

### 2. 用户登录
- **路径：** `/login`
- **方法：** GET, POST
- **功能：** 用户登录系统
- **参数：**
  - username: 用户名
  - password: 密码
  - next: 登录后跳转地址（可选）

### 3. 退出登录
- **路径：** `/logout`
- **方法：** GET
- **功能：** 用户退出登录

### 4. 修改密码
- **路径：** `/user/change-password`
- **方法：** GET, POST
- **功能：** 修改用户密码
- **权限：** 需要登录

### 5. 重置密码
- **路径：** `/user/reset-password`
- **方法：** GET, POST
- **功能：** 重置用户密码

## 二、商品相关接口

### 1. 商品详情
- **路径：** `/goods/detail/<int:goods_id>`
- **方法：** GET
- **功能：** 查看商品详细信息

### 2. 商品购买确认
- **路径：** `/goods/<int:goods_id>/purchase/confirm`
- **方法：** GET
- **功能：** 确认商品购买信息
- **权限：** 需要登录

### 3. 提交商品购买
- **路径：** `/goods/<int:goods_id>/purchase/submit`
- **方法：** POST
- **功能：** 提交商品购买请求
- **权限：** 需要登录
- **参数：**
  - quantity: 购买数量
  - address_id: 收货地址ID
  - payment_method: 支付方式
  - activity_id: 活动ID（可选）

## 三、秒杀相关接口

### 1. 秒杀活动列表
- **路径：** `/seckill/list`
- **方法：** GET
- **功能：** 获取秒杀活动列表
- **参数：**
  - page: 页码（可选，默认1）

### 2. 秒杀活动详情
- **路径：** `/seckill/<int:activity_id>`
- **方法：** GET
- **功能：** 查看秒杀活动详情

### 3. 参与秒杀
- **路径：** `/seckill/<int:activity_id>/purchase`
- **方法：** POST
- **功能：** 参与秒杀活动
- **权限：** 需要登录
- **参数：**
  - address_id: 收货地址ID
  - payment_method: 支付方式

### 4. 秒杀状态查询
- **路径：** `/seckill/<int:activity_id>/status`
- **方法：** GET
- **功能：** 查询秒杀活动状态
- **权限：** 需要登录

## 四、订单相关接口

### 1. 订单列表
- **路径：** `/order/list`
- **方法：** GET
- **功能：** 查看用户订单列表
- **权限：** 需要登录
- **参数：**
  - page: 页码（可选，默认1）

### 2. 订单详情
- **路径：** `/order/detail/<int:order_id>`
- **方法：** GET
- **功能：** 查看订单详细信息
- **权限：** 需要登录

### 3. 删除订单
- **路径：** `/order/delete/<int:order_id>`
- **方法：** DELETE
- **功能：** 删除订单
- **权限：** 需要登录

### 4. 支付订单
- **路径：** `/order/<int:order_id>/pay`
- **方法：** POST
- **功能：** 支付订单
- **权限：** 需要登录

### 5. 确认收货
- **路径：** `/order/<int:order_id>/confirm-receipt`
- **方法：** POST
- **功能：** 确认收到商品
- **权限：** 需要登录

### 6. 取消订单
- **路径：** `/order/<int:order_id>/cancel`
- **方法：** POST
- **功能：** 取消订单
- **权限：** 需要登录

## 五、管理员接口

### 1. 用户管理
- **路径：** `/admin/users`
- **方法：** GET
- **功能：** 查看用户列表
- **权限：** 需要管理员权限

### 2. 用户信息
- **路径：** `/admin/users/<int:user_id>`
- **方法：** GET, PUT, DELETE
- **功能：** 查看/更新/删除用户信息
- **权限：** 需要管理员权限

### 3. 创建管理员
- **路径：** `/admin/create`
- **方法：** GET, POST
- **功能：** 创建管理员账号
- **权限：** 仅首次运行可用

## 六、首页接口

### 1. 首页
- **路径：** `/`
- **方法：** GET
- **功能：** 系统首页，展示商品列表
- **参数：**
  - page: 页码（可选，默认1）

## 七、通用说明

### 1. 响应格式
所有接口返回JSON格式数据，包含以下字段：
- code: 状态码（200成功，其他表示错误）
- msg: 提示信息
- data: 数据对象（可选）

### 2. 权限说明
- 需要登录的接口会检查用户是否已登录
- 需要管理员权限的接口会检查用户是否为管理员
- 未登录访问需要登录的接口会重定向到登录页面

### 3. 错误处理
- 400: 请求参数错误
- 401: 未登录
- 403: 权限不足
- 404: 资源不存在
- 429: 请求过于频繁
- 500: 服务器内部错误
